<!doctype html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en"> <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to working with Data in CUBA</title>
    <meta name="description" content="The CUBA Platform guides cover different aspects of the CUBA Platform and give you advice on how to work with CUBA Platform by giving you concrete examples.">
    <meta name="author" content="Haulmont">
    <link rel="stylesheet" href="/guides/css/foundation.css">
    <link rel="stylesheet" href="/guides/css/font-awesome.css">
    <link rel="stylesheet" href="/guides/css/coderay.css">
    <link rel="stylesheet" href="/guides/css/bootstrap.css">
    <link rel="stylesheet" href="https://www.cuba-platform.com/sites/all/themes/cuba_adaptive/css/reset.css">
    <link rel="stylesheet" href="https://www.cuba-platform.com/sites/all/themes/cuba_adaptive/css/animate.css">
    <link rel="stylesheet" href="/guides/css/extra.css">
    <link rel="stylesheet" href="/guides/css/extra2.css">
    <link rel="stylesheet" href="/guides/css/font-awesome.min.css">
    <link rel="stylesheet" href="/guides/css/guides.css">
    <script src="/guides/js/jquery_v2.1.min.js"></script>
</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-962 node-type-blog-post i18n-en">

<section id="wrapper">
    <!-- BEGIN HEADER -->
<header id="header">
    <div class="upper-header">
        <div class="upper-header-wrapper cuba-container">
            <div class="header-logo">
                <a href="/"></a>
            </div>
            <div class="header-options"></div>
            <div class="header-menu" role="navigation">
                <div class="region region-nav-main">
                    <section id="block-menu-menu-nav" class="block block-menu clearfix">
                        <ul class="menu nav">
                            <li class="first expanded dropdown">
                                <a href="/framework" data-target="#" class="dropdown-toggle" data-toggle="dropdown">Platform <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li class="first leaf"><a href="/framework">The Framework</a></li>
                                    <li class="leaf"><a href="/development-tools">Development Tools</a></li>
                                    <li class="leaf"><a href="/marketplace">Marketplace</a></li>
                                    <li class="last leaf"><a href="/license-pricing">License &amp; Pricing</a></li>
                                </ul>
                            </li>
                            <li class="leaf"><a href="/download">Download</a></li>
                            <li class="expanded active-trail active dropdown">
                                <a href="/online-demo" class="active-trail dropdown-toggle" data-target="#" data-toggle="dropdown">Learn <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li class="first leaf"><a href="/online-demo">Online Demo</a></li>
                                    <li class="leaf"><a href="/quickstart">Quick Start</a></li>
                                    <li class="leaf"><a href="/tutorials">Tutorials</a></li>
                                    <li class="leaf"><a href="/sample-projects">Sample Projects</a></li>
                                    <li class="leaf"><a href="/webinars">Webinars</a></li>
                                    <li class="leaf"><a href="/documentation">Documentation</a></li>
                                    <li class="last leaf"><a href="/faq">FAQ</a></li>
                                </ul>
                            </li>
                            <li class="expanded dropdown">
                                <a href="https://www.cuba-platform.com/discuss/" data-target="#" class="dropdown-toggle" data-toggle="dropdown">
                                    Community
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li class="first leaf"><a href="https://www.cuba-platform.com/discuss/">Forum</a></li>
                                    <li class="collapsed"><a href="/testimonials">Customer stories</a></li>
                                    <li class="last leaf"><a href="/blog">Blog</a></li>
                                </ul>
                            </li>
                            <li class="expanded dropdown">
                                <a href="/training" data-target="#" class="dropdown-toggle" data-toggle="dropdown">Services <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li class="first leaf"><a href="/training">Training</a></li>
                                    <li class="leaf"><a href="/support-options">Support</a></li>
                                    <li class="last leaf"><a href="/development">Development</a></li>
                                </ul>
                            </li>
                            <li class="leaf"><a href="/store">Store</a></li>
                            <li class="last leaf"><a href="/contacts">Contacts</a></li>
                        </ul>
                    </section>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- BEGIN LOWER HEADER -->
<div class="lower-header std">
    <div class="submenu">
        <div class="submenu-title-wrapper">
            <div class="cuba-container">
                <div class="region region-lower-header-submenu">
                    <section id="block-menu-block-1" class="block block-menu-block clearfix">

                        <h2 class="block-title">Learn</h2>

                        <div class="menu-block-wrapper menu-block-1 menu-name-menu-nav parent-mlid-0 menu-level-2">
                            <ul class="menu nav">
                                <li class="first leaf menu-mlid-1329"><a href="/online-demo">Online Demo</a></li>
                                <li class="leaf menu-mlid-1327"><a href="/quickstart">Quick Start</a></li>
                                <li class="leaf menu-mlid-1328"><a href="/tutorials">Tutorials</a></li>
                                <li class="leaf menu-mlid-1730"><a href="/sample-projects">Sample Projects</a></li>
                                <li class="leaf"><a href="/webinars">Webinars</a></li>
                                <li class="leaf menu-mlid-1326"><a href="/documentation">Documentation</a></li>
                                <li class="last leaf menu-mlid-1591"><a href="/faq">FAQ</a></li>
                            </ul>
                        </div>

                    </section>
                </div>
            </div>
        </div>

        <!-- WILL BE SHOWN UPON CONDITION -->

        <!-- WILL BE SHOWN UPON CONDITION -->

    </div>
</div>

<style>
    .upper-header .header-options {
        display: none;
    }

    .upper-header .upper-header-wrapper .header-menu div .nav > li:last-child > a {
        padding-right: 0;
    }
</style>

    <!-- Main Page Content and Sidebar -->
    <div class="content-wrapper">
        <div class="cuba-container text-node blog">
            <!-- Main content (left column) -->
            <div class="region region-content">
                <section id="block-system-main" class="block block-system clearfix">
                    <div id="node-962" class="article node node-blog-post node-promoted clearfix">
                        <div class="content">
                            <div class="field field-name-body field-type-text-with-summary field-label-hidden">
                                <div class="field-items">
                                    <div class="field-item even" property="content: encoded">
                                        <h1>Introduction to working with Data in CUBA</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide walks you through the CUBA APIs for programmatically interacting with the database through the DataManager API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what_will_be_built"><a class="anchor" href="#what_will_be_built"></a><a class="link" href="#what_will_be_built">What will be built</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide enhances the <a href="https://github.com/cuba-platform/cuba-petclinic">CUBA petclinic</a> example to show different use cases regarding programmatic data access with the DataManager API. In particular, the following use cases will be covered:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>automatic creation of a Visit for a given Pet Identification Number</p>
</li>
<li>
<p>automatic "Disease Warning Mailing" for endangered pets</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="final_application"><a class="anchor" href="#final_application"></a><a class="link" href="#final_application">Final Application</a></h3>
<a href="https://raw.githubusercontent.com/cuba-guides/cuba-petclinic-intro-to-datamanager/master/img/adjustments-cuba-petclinic-overview.gif"><img src="https://raw.githubusercontent.com/cuba-guides/cuba-petclinic-intro-to-datamanager/master/img/login-screen.png"/></a>
</div>
<div class="sect2">
<h3 id="requirements"><a class="anchor" href="#requirements"></a><a class="link" href="#requirements">Requirements</a></h3>
<div class="paragraph">
<p>Your development environment requires to contain the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK 1.8</a></p>
</li>
<li>
<p>a text editor or IDE (<a href="https://www.jetbrains.com/idea/download/">IntelliJ IDEA</a> preferred)</p>
</li>
<li>
<p><a href="https://www.cuba-platform.com/download">CUBA Studio</a> (optional)</p>
</li>
<li>
<p><a href="https://github.com/cuba-platform/cuba-cli/wiki/Installation">CUBA CLI</a> (optional)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://github.com/cuba-guides/cuba-petclinic-intro-to-datamanager/archive/master.zip">Download</a> and unzip the source repository for this guide, or clone it using git:</p>
</div>
<div class="paragraph">
<p><code>git clone <a href="https://github.com/cuba-guides/cuba-petclinic-intro-to-datamanager.git" class="bare">https://github.com/cuba-guides/cuba-petclinic-intro-to-datamanager.git</a></code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="example_cuba_petclinic"><a class="anchor" href="#example_cuba_petclinic"></a><a class="link" href="#example_cuba_petclinic">Example: CUBA petclinic</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The project that is the basis for this example is <a href="https://github.com/cuba-platform/cuba-petclinic">CUBA Petclinic</a>. It is based on the commonly known <a href="https://github.com/spring-projects/spring-petclinic">Spring Petclinic</a>. The CUBA Petclinic application deals with the domain of a Pet clinic and the associated business workflows to manage a pet clinic.</p>
</div>
<div class="paragraph">
<p>The underlying domain model for the application looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/guides/images/domain-model2.png" alt="Domain model">
</div>
</div>
<div class="paragraph">
<p>The main entities are <strong>Pet</strong> and <strong>Visit</strong>. A Pet is visiting the petclinic and during this Visit a Vet is taking care of it. A Pet belongs to an Owner, which can hold multiple pets. The visit describes the act of a pet visiting the clinic with the help of its owner.</p>
</div>
<a href="https://raw.githubusercontent.com/cuba-platform/cuba-petclinic/master/img/cuba-petclinic-overview.gif"><img src="https://raw.githubusercontent.com/cuba-platform/cuba-petclinic/master/img/login-screen.png"/></a>
</div>
</div>
<div class="sect1">
<h2 id="programmatic_data_access_interactions"><a class="anchor" href="#programmatic_data_access_interactions"></a><a class="link" href="#programmatic_data_access_interactions">Programmatic data access interactions</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Oftentimes it is necessary to interact with the database in a programmatic manner. In a CUBA based application, these cases are not as omnipresent as in other frameworks due to its declarative nature of data-binding for UIs, but still, there are
a lot of cases where data has to be loaded from the database or stored in the database as part of a business process.</p>
</div>
<div class="paragraph">
<p>The main interaction point that CUBA provides is the <a href="https://doc.cuba-platform.com/manual-7.0/dataManager.html">DataManager</a> API. This API allows the developer of a CUBA application to load and store data in the database through the general abstraction of entities.</p>
</div>
<div class="paragraph">
<p>DataManager is an Abstraction on top of the Java Persistence API (JPA). It hides away certain details that are not required on a day-to-day basis.</p>
</div>
<div class="paragraph">
<p>It also adds certain capabilities that are not available out-of-the-box in JPA. Those capabilities are mainly the <a href="https://doc.cuba-platform.com/manual-7.0/views.html">Views concept</a> as well as the application of <a href="https://doc.cuba-platform.com/manual-7.0/security_subsystem.html">security constraints</a>. More information about differences between JPA and DataManager can be found in the docs on <a href="https://doc.cuba-platform.com/manual-7.0/dm_vs_em.html">DataManager vs. EntityManager</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="load_data_with_datamanager"><a class="anchor" href="#load_data_with_datamanager"></a><a class="link" href="#load_data_with_datamanager">Load data with DataManager</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>DataManager has multiple ways to load data from the database. In this guide, the two main options are covered: load a single item as well as multiple items based on Queries.</p>
</div>
<div class="sect2">
<h3 id="single_item"><a class="anchor" href="#single_item"></a><a class="link" href="#single_item">Single Item</a></h3>
<div class="paragraph">
<p>The first option is to load a single Entity instance from the database. This option is often required if reference data needs to be read from the database in order to execute some logic for that entity instance or with the help of that entity instance.</p>
</div>
<div class="paragraph">
<p>In the case of the Petclinic example, there is some business logic which should create a new Visit for a given Pet by its Identification Number.</p>
</div>
<a href="https://raw.githubusercontent.com/cuba-guides/cuba-petclinic-intro-to-datamanager/master/img/create-visit-for-pet.png"><img src="https://raw.githubusercontent.com/cuba-guides/cuba-petclinic-intro-to-datamanager/master/img/create-visit-for-pet.png"/></a>
<div class="paragraph">
<p>The source code that loads the Pet instance by its Identification Number is located in <a href="https://github.com/cuba-guides/cuba-petclinic-intro-to-datamanager/blob/master/modules/core/src/com/cubaplatform/petclinic/service/visit/VisitServiceBean.java#L47">VisitServiceBean.java</a> in the example application. The usage of the DataManager API looks like this:</p>
</div>
<div class="listingblock">
<div class="title">VisitServiceBean.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
DataManager dataManager;

<span class="comment">/**
 * loads a Pet by its Identification Number
 * @param identificationNumber the Identification Number to load
 * @return the Pet for the given Identification Number
 */</span>
<span class="directive">private</span> Pet loadPetByIdentificationNumber(<span class="predefined-type">String</span> identificationNumber) {
    <span class="keyword">return</span> dataManager.load(Pet.class)
            .query(<span class="string"><span class="delimiter">&quot;</span><span class="content">select e from petclinic$Pet e where e.identificationNumber = :identificationNumber</span><span class="delimiter">&quot;</span></span>)
            .parameter(<span class="string"><span class="delimiter">&quot;</span><span class="content">identificationNumber</span><span class="delimiter">&quot;</span></span>, identificationNumber)
            .one();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>DataManager has a <a href="https://martinfowler.com/bliki/FluentInterface.html">fluent API</a> which allows to chain operations on the load operation in order to define parameters to the execution. In this case, the interaction starts with <code>dataManager.load(Pet.class)</code>. Then the JPQL query is defined and the associated parameters are configured with the parameter values. The <code>one()</code> method executes the load operation and fetches exactly one item that matches the criteria. If there are no results the corresponding exception is thrown.</p>
</div>
<div class="paragraph">
<p>It is up to the application developer to decide if the query can return one or possibly multiple results. In this case, it is only possible to create an Identification Number once, we can be sure that the query will return at the most one item.</p>
</div>
<div class="paragraph">
<p>In this case, the attribute <code>identificationNumber</code> is not the primary key of the entity. But it represents a globally unique identification number given by proper Pet authorities - therefore it is modeled uniquely within the application.</p>
</div>
<div class="paragraph">
<p>If the task is to load a Pet by its primary key (<code>id</code>) the query is easier to create as the query part is not needed: <code>dataManager.load(Pet.class).id(id).one();</code></p>
</div>
</div>
<div class="sect2">
<h3 id="multiple_items_by_query"><a class="anchor" href="#multiple_items_by_query"></a><a class="link" href="#multiple_items_by_query">Multiple Items by Query</a></h3>
<div class="paragraph">
<p>The next very common option is to load multiple items defined by a query.</p>
</div>
<div class="paragraph">
<p>The Petclinic application has the capability to let the user send out Disease Warning Mailings. The user has to define the location of a known disease as well as the type of Pet that is endangered by this disease. The system will find all endangered Pets and send out a Mailing to the owners.</p>
</div>
<a href="https://raw.githubusercontent.com/cuba-guides/cuba-petclinic-intro-to-datamanager/master/img/create-disease-warning-mailing.png"><img src="https://raw.githubusercontent.com/cuba-guides/cuba-petclinic-intro-to-datamanager/master/img/create-disease-warning-mailing.png"/></a>
<div class="paragraph">
<p>The part that finds the endangered Pets looks like this with the use of the DataManager API:</p>
</div>
<div class="listingblock">
<div class="title">DiseaseWarningMailingServiceBean.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
DataManager dataManager;

<span class="directive">private</span> <span class="predefined-type">List</span>&lt;Pet&gt; findEndangeredPets(PetType petType, <span class="predefined-type">String</span> city) {
    <span class="keyword">return</span> dataManager.load(Pet.class)
                .query(<span class="string"><span class="delimiter">&quot;</span><span class="content">select e from petclinic$Pet e where e.owner.city = :ownerCity and e.type.id = :petType</span><span class="delimiter">&quot;</span></span>)
                .parameter(<span class="string"><span class="delimiter">&quot;</span><span class="content">ownerCity</span><span class="delimiter">&quot;</span></span>, city)
                .parameter(<span class="string"><span class="delimiter">&quot;</span><span class="content">petType</span><span class="delimiter">&quot;</span></span>, petType)
                .view(<span class="string"><span class="delimiter">&quot;</span><span class="content">pet-with-owner-and-type</span><span class="delimiter">&quot;</span></span>)
                .list();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The query part is a little more complicated compared to above, but the same pattern applies. The differences in this example are the usage of the <code>list()</code> method as we expect multiple Pets from the database query. Also, a specific view has been used, because not only the Pet data but also the Owner data has to be loaded in order to send out the Mailings.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="write_data_with_datamanager"><a class="anchor" href="#write_data_with_datamanager"></a><a class="link" href="#write_data_with_datamanager">Write Data with DataManager</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>DataManager is also responsible for writing data into the database. There are also different ways to achieve it based on the case at hand.</p>
</div>
<div class="sect2">
<h3 id="single_item_2"><a class="anchor" href="#single_item_2"></a><a class="link" href="#single_item_2">Single Item</a></h3>
<div class="paragraph">
<p>The first most commonly used case is to update or create a single item in the database. There are no major differences between creating and updating an entity from the usage perspective.</p>
</div>
<div class="paragraph">
<p>When revisiting the example from above, where a new Visit for a given Pet ID is created, we only looked at the part which loads the Pet by its Pet ID. In this case, we are more interested in the creation part of the Visit entity. The source code to create and save a Visit looks like this:</p>
</div>
<div class="listingblock">
<div class="title">VisitServiceBean.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
DataManager dataManager;

<span class="directive">private</span> Visit createVisitForPet(Pet pet) {

    Visit visit = dataManager.create(Visit.class); <i class="conum" data-value="1"></i><b>(1)</b>

    visit.setPet(pet);
    visit.setVisitDate(timeSource.currentTimestamp());

    <span class="keyword">return</span> dataManager.commit(visit); <i class="conum" data-value="2"></i><b>(2)</b>

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>an entity instance is created with all initializations in memory</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the entity instance is stored in the DB</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The creation of an instance through DataManager does the initialization of the instance as well. It is important not to create an instance via <code>new Visit()</code> but rather through this Factory method, so that CUBA can do all the required initialization (like <code>@PostConstruct</code> annotated methods e.g.).</p>
</div>
<div class="paragraph">
<p>Once the entity instance was created, the data of that entity has to be set through its corresponding setter methods. In this case, the database instance of the Pet is set as well as the current date as the visit date.</p>
</div>
<div class="paragraph">
<p>The process of storing an entity instance contains a few steps like security checks, execution of Entity Listeners and so on. The return value of the commit method is the stored instance with all the properties set that have been added during the storage phase.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
There is a couple of other convenience API methods for storing entites. For more information about those variants see the <a href="http://files.cuba-platform.com/javadoc/cuba/7.0/com/haulmont/cuba/core/global/DataManager.html">DataManager API reference</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="transactions_commit_context"><a class="anchor" href="#transactions_commit_context"></a><a class="link" href="#transactions_commit_context">Transactions &amp; Commit Context</a></h3>
<div class="paragraph">
<p>The example from above shows how to store a single item in the database. Although this is oftentimes sufficient, a lot of cases require to store multiple items in a single transaction. The default example for this is the bank transfer from one account to another. In this case, it is crucial that the update of both accounts happens together or not at all, but never only one of them.</p>
</div>
<div class="paragraph">
<p>The DataManager API always encapsulates the database operation in a transaction. This means that by default the <code>commit(visit)</code> call is executed in one transaction. Another call to <code>commit</code> would create another transaction.</p>
</div>
<div class="paragraph">
<p>To execute updates on multiple entity instances there is the concept of a <code>CommitContext</code>. The commit context defines all entity instances that should get created / updated and removed. The DataManager accepts a <code>CommitContext</code> object as an alternative to an entity instance. In this case, all entity instances that are held by the commit context will get transferred to the database within one transaction.</p>
</div>
<div class="paragraph">
<p>The <code>CommitContext</code> has two main methods: <a href="http://files.cuba-platform.com/javadoc/cuba/7.0/com/haulmont/cuba/core/global/CommitContext.html#addInstanceToCommit-com.haulmont.cuba.core.entity.Entity-">addInstanceToCommit</a> as well as <a href="http://files.cuba-platform.com/javadoc/cuba/7.0/com/haulmont/cuba/core/global/CommitContext.html#addInstanceToRemove-com.haulmont.cuba.core.entity.Entity-">addInstancesToRemove</a> which allow defining which items should be added / updated as well as removed within one transaction.</p>
</div>
<div class="paragraph">
<p>In case multiple visits should be updated within one transaction, the usage of <code>CommitContext</code> looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
DataManager dataManager;

<span class="directive">private</span> <span class="type">void</span> createVisitForPet(Pet pet) {

    Visit todaysVisit = createVisitInstance(pet);
    todaysVisit.setVisitDate(today());

    Visit followUpCheckVisit = createVisitInstance(pet);
    followUpCheckVisit.setVisitDate(nextWeek());


    CommitContext commitContext = <span class="keyword">new</span> CommitContext();

    commitContext.addInstanceToCommit(todaysVisit); <i class="conum" data-value="1"></i><b>(1)</b>
    commitContext.addInstanceToCommit(followUpCheckVisit);

    dataManager.commit(commitContext); <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>addInstanceToCommit</code> allows adding entity instances to the commit context</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>commit</code> can take a <code>CommitContext</code> instance for storing multiple entity instances in one transaction</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sometimes the fact that DataManager API always creates a new transaction is not the desired behavior. Instead, an already running transaction should be re-used. In this case, a very similar API called <code>TransactionalDataManager</code> can be used. It behaves basically the same as the regular <code>DataManager</code> with the difference that it allows to join an existing transaction as well as enabling programmatic transaction handling.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a><a class="link" href="#summary">Summary</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Data Manager API is a CUBA abstraction that allows an application developer to fulfill common use-cases for working with databases. It has multiple operations to allow for regular create, read, update and delete operations (CRUD). Entity instances can be stored directly or within a Commit Context. Every operation will be encapsulated in a new transaction.</p>
</div>
<div class="sect2">
<h3 id="further_information"><a class="anchor" href="#further_information"></a><a class="link" href="#further_information">Further information</a></h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://doc.cuba-platform.com/manual-7.0/dataManager.html">DataManager reference documentation</a></p>
</li>
<li>
<p><a href="https://www.cuba-platform.com/webinars/working-data">Working with Data (Webinar)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Sidebar (right column) -->
            <div id="blog-sidebar">
                <div class="region region-sidebar">
                    <section id="block-block-29" class="block block-block clearfix">


                        <div class="guide-panel">
                            <h4>Table of contents</h4>
                            <ul class="sectlevel1">
<li><a href="#what_will_be_built">What will be built</a></li>
<li><a href="#example_cuba_petclinic">Example: CUBA petclinic</a></li>
<li><a href="#programmatic_data_access_interactions">Programmatic data access interactions</a></li>
<li><a href="#load_data_with_datamanager">Load data with DataManager</a></li>
<li><a href="#write_data_with_datamanager">Write Data with DataManager</a></li>
<li><a href="#summary">Summary</a></li>
</ul>
                        </div>


                        <div class="guide-panel download">
                            <h4>Example code</h4>
                            <a class="button expanded"  href="https://github.com/cuba-guides/cuba-petclinic-intro-to-datamanager/archive/master.zip" target="_blank">Download</a>
                            <a href="https://github.com/cuba-guides/cuba-petclinic-intro-to-datamanager" class="github-link" target="_blank">Github</a>
                        </div>
                        <div class="guide-panel cuba-version">
                            <h4>Supported Versions</h4>
                            <ul>
                                <li>CUBA: 7.0+</li>
                                <li>Java: 8+</li>
                            </ul>
                        </div>

                    </section>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <!-- BEGIN FOOTER -->
<footer id="footer">
    <div class="footer-wrapper cuba-container">
        <div class="region region-footer-sitemap">
            <section id="block-footer-sitemap-footer-sitemap" class="block block-footer-sitemap clearfix">
                <div id="footer-sitemap" class="clearfix">
                    <div class="fs-block-content">
                        <div class="menu-footer-sitemap">
                            <ul class="footer_links_menu-footer-sitemap total-items-5 parent-items-0 single-items-0">
                                <li class="menu-1466 depth-1 total-children-4 parent-children-0 single-children-4  first">
                                    <a href="/framework" class="fs-root-link">Platform</a>
                                    <ul class="footer_links_menu-footer-sitemap total-items-4 parent-items-0 single-items-0">
                                        <li class="menu-2770 depth-2 fs-no-children  first"><a href="/framework">The Framework</a></li>
                                        <li class="menu-1473 depth-2 fs-no-children"><a href="/development-tools">Development Tools</a></li>
                                        <li class="menu-2838 depth-2 fs-no-children"><a href="/marketplace">Marketplace</a></li>
                                        <li class="menu-2771 depth-2 fs-no-children  last"><a href="/license-pricing">License &amp; Pricing</a></li>
                                    </ul>
                                </li>
                                <li class="menu-1469 depth-1 total-children-7 parent-children-0 single-children-7">
                                    <a href="/online-demo" class="fs-root-link">Learn</a>
                                    <ul class="footer_links_menu-footer-sitemap total-items-7 parent-items-0 single-items-0">
                                        <li class="menu-1479 depth-2 fs-no-children first"><a href="/online-demo">Online demo</a></li>
                                        <li class="menu-1477 depth-2 fs-no-children"><a href="/quickstart">Quick start</a></li>
                                        <li class="menu-1478 depth-2 fs-no-children"><a href="/tutorials">Tutorials</a></li>
                                        <li class="menu-1731 depth-2 fs-no-children"><a href="/sample-projects">Sample Projects</a></li>
                                        <li class="menu-1773 depth-2 fs-no-children"><a href="/webinars">Webinars</a></li>
                                        <li class="menu-1476 depth-2 fs-no-children"><a href="/documentation">Documentation</a></li>
                                        <li class="menu-1602 depth-2 fs-no-children last"><a href="/faq">FAQ</a></li>
                                    </ul>
                                </li>
                                <li class="menu-1603 depth-1 total-children-3 parent-children-0 single-children-3"><a
                                        href="https://www.cuba-platform.com/discuss/" class="fs-root-link">Community</a>
                                    <ul class="footer_links_menu-footer-sitemap total-items-3 parent-items-0 single-items-0">
                                        <li class="menu-1604 depth-2 fs-no-children first"><a href="https://www.cuba-platform.com/discuss/">Forum</a></li>
                                        <li class="menu-1692 depth-2 fs-no-children"><a href="/testimonials">Customer stories</a></li>
                                        <li class="menu-1615 depth-2 fs-no-children last"><a href="/blog">Blog</a></li>
                                    </ul>
                                </li>
                                <li class="menu-1663 depth-1 total-children-3 parent-children-0 single-children-3"><a
                                        href="/training" class="fs-root-link">Services</a>
                                    <ul class="footer_links_menu-footer-sitemap total-items-3 parent-items-0 single-items-0">
                                        <li class="menu-1756 depth-2 fs-no-children first"><a href="/training">Training</a></li>
                                        <li class="menu-1757 depth-2 fs-no-children"><a href="/support-options">Support</a></li>
                                        <li class="menu-1758 depth-2 fs-no-children last"><a href="/deployment">Development</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="menu-1612 depth-1 total-children-3 parent-children-0 single-children-3  last">
                                    <a href="/download" class="fs-root-link">More</a>
                                    <ul class="footer_links_menu-footer-sitemap total-items-3 parent-items-0 single-items-0">
                                        <li class="menu-2773 depth-2 fs-no-children first"><a href="/download">Download</a></li>
                                        <li class="menu-2775 depth-2 fs-no-children"><a href="/store">Store</a></li>
                                        <li class="menu-1480 depth-2 fs-no-children last"><a href="/contacts">Contacts</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </section>
        </div>
        <div class="region region-footer-copyright">
            <section id="block-block-14" class="block block-block clearfix">
                <div class="footer-copyright">
                    <div class="copyright">Copyright &copy; 2008-2018 Haulmont</div>
                    <div class="licences"><a href="/terms-of-use">Terms of Use</a></div>
                    <div class="socials">
                        <ul>
                            <li><a href="https://github.com/cuba-platform/cuba" class="socials-icon github"></a></li>
                            <li><a href="https://www.youtube.com/c/CubaPlatform" class="socials-icon youtube"></a></li>
                            <li><a href="https://www.facebook.com/CUBAplatform" class="socials-icon facebook"></a></li>
                            <li><a href="https://twitter.com/CubaPlatform" class="socials-icon twitter"></a></li>
                            <li><a href="https://www.linkedin.com/company/cuba-platform" class="socials-icon linkedin"></a></li>
                            <li><a href="https://www.cuba-platform.com/rss.xml" class="socials-icon rss"></a></li>
                        </ul>
                    </div>
                </div>
                <!-- Place this tag in your head or just before your close body tag. -->
                <script async defer src="https://buttons.github.io/buttons.js"></script>
            </section>
        </div>
    </div>
    <!--<script src="https://www.cuba-platform.com/sites/default/files/js/js_OmOCame-fnmHrN5e61CZ6Qi6MS5rHZ2jo6O0qsiYS1Q.js"></script>
    <script src="https://www.cuba-platform.com/sites/default/files/js/js_Es7w5kWiS8CGph1E0HE2jrcO3tONeJfC-cTNWigk87E.js"></script>-->
</footer>
<!-- END FOOTER -->
<div class="scrollTop"></div>
</section>

<script src="/guides/js/foundation.min.js"></script>
<script src="https://unpkg.com/isotope-layout@3.0/dist/isotope.pkgd.js"></script>
<script src="/guides/js/vendor/modernizr.js"></script>
<script src="/guides/js/toc.js"></script>
<script src="/guides/js/navigation.js"></script>
<script src="/guides/js/navbar.js"></script>
<script src="/guides/js/extra.js"></script>
<script src="/guides/js/extra2.js"></script>
<script>
(function ($) {
  $(document).foundation();
  var doc = document.documentElement;
  doc.setAttribute('data-useragent', navigator.userAgent)

  /* Issue #24 */
  $(".blog .content img").each(function() {
    var imgMarkup = $(this)[0].outerHTML;
    console.log(imgMarkup);
    $(this).replaceWith('<div class="img-center">' + imgMarkup + '</div>');
  });
})(jQuery); 
</script>
</body>
</html>
