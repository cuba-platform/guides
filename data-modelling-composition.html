<!doctype html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en"> <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Modelling: Composition</title>
    <meta name="description" content="The CUBA Platform guides cover different aspects of the CUBA Platform and give you advice on how to work with CUBA Platform by giving you concrete examples.">
    <meta name="author" content="Haulmont">
    <link rel="shortcut icon" href="/guides/images/favicon.png" type="image/png" />
    <link rel="stylesheet" href="/guides/css/foundation.css">
    <link rel="stylesheet" href="/guides/css/font-awesome.css">
    <link rel="stylesheet" href="/guides/css/coderay.css">
    <link rel="stylesheet" href="/guides/css/bootstrap.css">
    <link rel="stylesheet" href="https://www.cuba-platform.com/sites/all/themes/cuba_adaptive/css/reset.css">
    <link rel="stylesheet" href="https://www.cuba-platform.com/sites/all/themes/cuba_adaptive/css/animate.css">
    <link rel="stylesheet" href="/guides/css/extra.css">
    <link rel="stylesheet" href="/guides/css/extra2.css">
    <link rel="stylesheet" href="/guides/css/font-awesome.min.css">
    <link rel="stylesheet" href="/guides/css/guides.css">
    <script src="/guides/js/jquery_v2.1.min.js"></script>
</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-962 node-type-blog-post i18n-en">

<section id="wrapper">
    <!-- BEGIN HEADER -->
<header id="header">
    <div class="upper-header">
        <div class="upper-header-wrapper cuba-container">
            <div class="header-logo">
                <a href="/"></a>
            </div>
            <div class="header-options"></div>
            <div class="header-menu" role="navigation">
                <div class="region region-nav-main">
                    <section id="block-menu-menu-nav" class="block block-menu clearfix">
                        <ul class="menu nav">
                            <li class="first expanded dropdown">
                                <a href="/framework" data-target="#" class="dropdown-toggle" data-toggle="dropdown">Platform <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li class="first leaf"><a href="/framework">The Framework</a></li>
                                    <li class="leaf"><a href="/development-tools">Development Tools</a></li>
                                    <li class="leaf"><a href="/marketplace">Marketplace</a></li>
                                    <li class="last leaf"><a href="/license-pricing">License &amp; Pricing</a></li>
                                </ul>
                            </li>
                            <li class="leaf"><a href="/download">Download</a></li>
                            <li class="expanded active-trail active dropdown">
                                <a href="/online-demo" class="active-trail dropdown-toggle" data-target="#" data-toggle="dropdown">Learn <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li class="first leaf"><a href="/online-demo">Online Demo</a></li>
                                    <li class="leaf"><a href="/quickstart">Quick Start</a></li>
                                    <li class="leaf"><a href="/tutorials">Tutorials</a></li>
                                    <li class="leaf"><a href="/sample-projects">Sample Projects</a></li>
                                    <li class="leaf"><a href="/webinars">Webinars</a></li>
                                    <li class="leaf"><a href="/documentation">Documentation</a></li>
                                    <li class="last leaf"><a href="/faq">FAQ</a></li>
                                </ul>
                            </li>
                            <li class="expanded dropdown">
                                <a href="https://www.cuba-platform.com/discuss/" data-target="#" class="dropdown-toggle" data-toggle="dropdown">
                                    Community
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li class="first leaf"><a href="https://www.cuba-platform.com/discuss/">Forum</a></li>
                                    <li class="collapsed"><a href="/testimonials">Customer stories</a></li>
                                    <li class="last leaf"><a href="/blog">Blog</a></li>
                                </ul>
                            </li>
                            <li class="expanded dropdown">
                                <a href="/training" data-target="#" class="dropdown-toggle" data-toggle="dropdown">Services <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li class="first leaf"><a href="/training">Training</a></li>
                                    <li class="leaf"><a href="/support-options">Support</a></li>
                                    <li class="last leaf"><a href="/development">Development</a></li>
                                </ul>
                            </li>
                            <li class="leaf"><a href="/store">Store</a></li>
                            <li class="last leaf"><a href="/contacts">Contacts</a></li>
                        </ul>
                    </section>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- BEGIN LOWER HEADER -->
<div class="lower-header std">
    <div class="submenu">
        <div class="submenu-title-wrapper">
            <div class="cuba-container">
                <div class="region region-lower-header-submenu">
                    <section id="block-menu-block-1" class="block block-menu-block clearfix">

                        <h2 class="block-title">Learn</h2>

                        <div class="menu-block-wrapper menu-block-1 menu-name-menu-nav parent-mlid-0 menu-level-2">
                            <ul class="menu nav">
                                <li class="first leaf menu-mlid-1329"><a href="/online-demo">Online Demo</a></li>
                                <li class="leaf menu-mlid-1327"><a href="/quickstart">Quick Start</a></li>
                                <li class="leaf menu-mlid-1328"><a href="/tutorials">Tutorials</a></li>
                                <li class="leaf menu-mlid-1730"><a href="/sample-projects">Sample Projects</a></li>
                                <li class="leaf"><a href="/webinars">Webinars</a></li>
                                <li class="leaf menu-mlid-1326"><a href="/documentation">Documentation</a></li>
                                <li class="last leaf menu-mlid-1591"><a href="/faq">FAQ</a></li>
                            </ul>
                        </div>

                    </section>
                </div>
            </div>
        </div>

        <!-- WILL BE SHOWN UPON CONDITION -->

        <!-- WILL BE SHOWN UPON CONDITION -->

    </div>
</div>

<style>
    .upper-header .header-options {
        display: none;
    }

    .upper-header .upper-header-wrapper .header-menu div .nav > li:last-child > a {
        padding-right: 0;
    }
</style>

    <!-- Main Page Content and Sidebar -->
    <div class="content-wrapper">
        <div class="cuba-container text-node blog">
            <!-- Main content (left column) -->
            <div class="region region-content">
                <section id="block-system-main" class="block block-system clearfix">
                    <div id="node-962" class="article node node-blog-post node-promoted clearfix">
                        <div class="content">
                            <div class="field field-name-body field-type-text-with-summary field-label-hidden">
                                <div class="field-items">
                                    <div class="field-item even" property="content: encoded">
                                        <h1>Data Modelling: Composition</h1>
<div class="sect1">
<h2 id="what_will_be_build"><a class="anchor" href="#what_will_be_build"></a><a class="link" href="#what_will_be_build">What Will be Build</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide enhances the <a href="https://github.com/cuba-platform/cuba-petclinic">CUBA petclinic</a> example to show the mechanism to define entity inheritance. In particular, the following use cases will be covered:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Pet</code> entity becomes a the superclass for all Pet types</p>
</li>
<li>
<p><code>Cat</code>, <code>Bird</code> and <code>Rat</code> will be created as concrete Pet type entities</p>
</li>
<li>
<p>The user has the choice between different Pet types at creation time of the Pet. The system will show the corresponding editor accordingly so that the user can also enter the type specific information.</p>
</li>
<li>
<p>One level: Owner &lt;&gt;-&#8594; Address</p>
</li>
<li>
<p>Two levels: Pet &lt;&gt;-&#8594; Health Records &lt;&gt;-&#8594; Attachment</p>
</li>
<li>
<p>Three levels: Owner -&#8594; Pet -&#8594; Visit -&#8594; Note</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="final_application"><a class="anchor" href="#final_application"></a><a class="link" href="#final_application">Final Application</a></h3>
<a href="https://raw.githubusercontent.com/cuba-guides/cuba-petclinic-data-model-entity-inheritance/master/img/adjustments-cuba-petclinic-overview.gif"><img src="https://raw.githubusercontent.com/cuba-guides/cuba-petclinic-data-model-entity-inheritance/master/img/login-screen.png"/></a>
</div>
<div class="sect2">
<h3 id="requirements"><a class="anchor" href="#requirements"></a><a class="link" href="#requirements">Requirements</a></h3>
<div class="paragraph">
<p>Your development environment requires to contain the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK 1.8</a></p>
</li>
<li>
<p>a text editor or IDE (<a href="https://www.jetbrains.com/idea/download/">IntelliJ IDEA</a> preferred)</p>
</li>
<li>
<p><a href="https://www.cuba-platform.com/download">CUBA Studio</a> (optional)</p>
</li>
<li>
<p><a href="https://github.com/cuba-platform/cuba-cli/wiki/Installation">CUBA CLI</a> (optional)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://github.com/cuba-guides/cuba-petclinic-data-model-composition/archive/master.zip">Download</a> and unzip the source repository for this guide, or clone it using git:</p>
</div>
<div class="paragraph">
<p><code>git clone <a href="https://github.com/cuba-guides/cuba-petclinic-data-model-composition.git" class="bare">https://github.com/cuba-guides/cuba-petclinic-data-model-composition.git</a></code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="example_cuba_petclinic"><a class="anchor" href="#example_cuba_petclinic"></a><a class="link" href="#example_cuba_petclinic">Example: CUBA petclinic</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The project that is the basis for this example is <a href="https://github.com/cuba-platform/cuba-petclinic">CUBA Petclinic</a>. It is based on the commonly known <a href="https://github.com/spring-projects/spring-petclinic">Spring Petclinic</a>. The CUBA Petclinic application deals with the domain of a Pet clinic and the associated business workflows to manage a pet clinic.</p>
</div>
<div class="paragraph">
<p>The underlying domain model for the application looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/guides/images/domain-model.png" alt="Domain model">
</div>
</div>
<div class="paragraph">
<p>The main entities are <strong>Pet</strong> and <strong>Visit</strong>. A Pet is visiting the petclinic and during this Visit a Vet is taking care of it. A Pet belongs to an Owner, which can hold multiple pets. The visit describes the act of a pet visiting the clinic with the help of its owner.</p>
</div>
<a href="https://raw.githubusercontent.com/cuba-platform/cuba-petclinic/master/img/cuba-petclinic-overview.gif"><img src="https://raw.githubusercontent.com/cuba-platform/cuba-petclinic/master/img/login-screen.png"/></a>
</div>
</div>
<div class="sect1">
<h2 id="composition_vs_association"><a class="anchor" href="#composition_vs_association"></a><a class="link" href="#composition_vs_association">Composition vs. Association</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>CUBA platform supports two types of relationship between entities: association and composition. They are called ASSOCIATION and COMPOSITION respectively in the CUBA Studio interface. Association is a relationship between the objects that can exist separately from each other. Composition, on the other hand, is used for "master-detail" relations, when the detail instances can exist only as part of the master.</p>
</div>
<div class="paragraph">
<p>In the Petclinic example a case of an <code>Owner</code> and its <code>Addresses</code> may be considered an example of composition: an <code>Address</code> that does not belong to any <code>Owner</code> does not make sense.</p>
</div>
<div class="paragraph">
<p>Typically, the entities belonging to a composition are edited together since it is more natural. A user opens the <code>Owner</code> editing screen and sees the list of <code>addresses</code>, so the user can create and edit them, but all changes both for the <code>Owner</code> and the <code>Address</code> are saved to the database together in one transaction, and only after the user confirms saving of the master entity (the <code>Owner</code>).</p>
</div>
<div class="sect4">
<h5 id="one_to_many_one_level_of_nesting"><a class="anchor" href="#one_to_many_one_level_of_nesting"></a><a class="link" href="#one_to_many_one_level_of_nesting">One-to-Many: One Level of Nesting</a></h5>
<div class="paragraph">
<p>A one-to-many composition using the <code>Owner</code> and the <code>Address</code> entities as an example:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/guides/images/data-model-composition/composition_domain_model_one_level.png" alt="composition domain model one level">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/cuba-guides/cuba-petclinic-data-model-composition/blob/master/modules/global/src/com/haulmont/sample/petclinic/entity/owner/Address.java">Address.java</a> - the <code>Address</code> entity contains a mandatory link to the <code>Owner</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the Studio entity designer, set the following settings for the <code>owner</code> attribute: <strong>Attribute type</strong> - <code>ASSOCIATION</code>, <strong>Cardinality</strong> - <code>MANY_TO_ONE</code>, <strong>Mandatory</strong> - <code>on</code>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://github.com/cuba-guides/cuba-petclinic-data-model-composition/blob/master/modules/global/src/com/haulmont/sample/petclinic/entity/owner/Owner.java">Owner.java</a> - the <code>Owner</code> entity contains a one-to-many collection of <code>addresses</code>. The corresponding field is annotated with <code>@Composition</code> in order to implement composition, and `@OnDelete for cascaded soft delete.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the Studio entity designer, set the following settings for the <code>addresses</code> attribute: <strong>Attribute type</strong> - <code>COMPOSITION</code>, <strong>Cardinality</strong> - <code>ONE_TO_MANY</code>, <strong>On delete</strong> - <code>CASCADE</code>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://github.com/cuba-guides/cuba-petclinic-data-model-composition/blob/master/modules/global/src/com/haulmont/sample/petclinic/views.xml">views.xml</a> - the <code>owner-with-pets-and-addresses</code> view of the <code>Owner</code> editing screen contains the <code>addresses</code> collection attribute. <code>addresses</code> itself are loaded with <code>_local</code> view, because the <code>owner</code> attribute of the <code>Address</code> entity is set only at the creation of a new <code>Address</code> instance and never changes after that, so there is no need to load it.</p>
</li>
<li>
<p><a href="https://github.com/cuba-guides/cuba-petclinic-data-model-composition/blob/master/modules/global/src/com/haulmont/sample/petclinic/web/owner/owner/owner-edit.xml">owner-edit.xml</a> - the XML descriptor of the <code>Owner</code> editor screen defines a datasource for the <code>Owner</code> instance and a nested one for its <code>addresses</code>. It also contains a table for managing the <code>Address</code> instances.</p>
</li>
<li>
<p><a href="https://github.com/cuba-guides/cuba-petclinic-data-model-composition/blob/master/modules/global/src/com/haulmont/sample/petclinic/web/owner/address/address-edit.xml">address-edit.xml</a> - a standard editor for the <code>Address</code> entity.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a result, editing of an <code>Owner</code> instance works as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Owner</code> edit screen shows a list of <code>addresses</code>.</p>
</li>
<li>
<p>A user can pick a <code>address</code> and open its editor. When <strong>OK</strong> is clicked in the <code>Address</code> editor, the updated instance of the <code>Address</code> is not yet saved to the database, but to the <code>addressesDc</code> data container of the <code>Owner</code> editor.</p>
</li>
<li>
<p>The user can create new <code>Address</code> instances and delete existing ones. All changes will be saved to the <code>terminalsDc</code> data container.</p>
</li>
<li>
<p>When a user clicks <strong>OK</strong> in the <code>Owner</code> edit screen, the updated <code>Owner</code> instance together with all the updated <code>Address</code> instances is submitted to the <a href="#dataManager">DataManager</a>.commit() method on the middleware and saved to the database within a single transaction.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a><a class="link" href="#summary">Summary</a></h2>
<div class="sectionbody">

</div>
</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Sidebar (right column) -->
            <div id="blog-sidebar">
                <div class="region region-sidebar">
                    <section id="block-block-29" class="block block-block clearfix">
                        <div class="guide-panel cuba-version">
                            <h4>CUBA Version 7.0+</h4>
                        </div>

                        <div class="guide-panel download">
                            <h4>Get the code</h4>
                            <a class="button expanded"  href="https://github.com/cuba-guides/cuba-petclinic-data-model-composition/archive/master.zip" target="_blank">Download</a>
                            <a href="https://github.com/cuba-guides/cuba-petclinic-data-model-composition" class="github-link" target="_blank">Github</a>
                        </div>

                        <div class="guide-panel">
                            <h4>Table of contents</h4>
                            <ul class="sectlevel1">
<li><a href="#what_will_be_build">What Will be Build</a></li>
<li><a href="#example_cuba_petclinic">Example: CUBA petclinic</a></li>
<li><a href="#composition_vs_association">Composition vs. Association</a></li>
<li><a href="#summary">Summary</a></li>
</ul>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <!-- BEGIN FOOTER -->
<footer id="footer">
    <div class="footer-wrapper cuba-container">
        <div class="region region-footer-sitemap">
            <section id="block-footer-sitemap-footer-sitemap" class="block block-footer-sitemap clearfix">
                <div id="footer-sitemap" class="clearfix">
                    <div class="fs-block-content">
                        <div class="menu-footer-sitemap">
                            <ul class="footer_links_menu-footer-sitemap total-items-5 parent-items-0 single-items-0">
                                <li class="menu-1466 depth-1 total-children-4 parent-children-0 single-children-4  first">
                                    <a href="/framework" class="fs-root-link">Platform</a>
                                    <ul class="footer_links_menu-footer-sitemap total-items-4 parent-items-0 single-items-0">
                                        <li class="menu-2770 depth-2 fs-no-children  first"><a href="/framework">The Framework</a></li>
                                        <li class="menu-1473 depth-2 fs-no-children"><a href="/development-tools">Development Tools</a></li>
                                        <li class="menu-2838 depth-2 fs-no-children"><a href="/marketplace">Marketplace</a></li>
                                        <li class="menu-2771 depth-2 fs-no-children  last"><a href="/license-pricing">License &amp; Pricing</a></li>
                                    </ul>
                                </li>
                                <li class="menu-1469 depth-1 total-children-7 parent-children-0 single-children-7">
                                    <a href="/online-demo" class="fs-root-link">Learn</a>
                                    <ul class="footer_links_menu-footer-sitemap total-items-7 parent-items-0 single-items-0">
                                        <li class="menu-1479 depth-2 fs-no-children first"><a href="/online-demo">Online demo</a></li>
                                        <li class="menu-1477 depth-2 fs-no-children"><a href="/quickstart">Quick start</a></li>
                                        <li class="menu-1478 depth-2 fs-no-children"><a href="/tutorials">Tutorials</a></li>
                                        <li class="menu-1731 depth-2 fs-no-children"><a href="/sample-projects">Sample Projects</a></li>
                                        <li class="menu-1773 depth-2 fs-no-children"><a href="/webinars">Webinars</a></li>
                                        <li class="menu-1476 depth-2 fs-no-children"><a href="/documentation">Documentation</a></li>
                                        <li class="menu-1602 depth-2 fs-no-children last"><a href="/faq">FAQ</a></li>
                                    </ul>
                                </li>
                                <li class="menu-1603 depth-1 total-children-3 parent-children-0 single-children-3"><a
                                        href="https://www.cuba-platform.com/discuss/" class="fs-root-link">Community</a>
                                    <ul class="footer_links_menu-footer-sitemap total-items-3 parent-items-0 single-items-0">
                                        <li class="menu-1604 depth-2 fs-no-children first"><a href="https://www.cuba-platform.com/discuss/">Forum</a></li>
                                        <li class="menu-1692 depth-2 fs-no-children"><a href="/testimonials">Customer stories</a></li>
                                        <li class="menu-1615 depth-2 fs-no-children last"><a href="/blog">Blog</a></li>
                                    </ul>
                                </li>
                                <li class="menu-1663 depth-1 total-children-3 parent-children-0 single-children-3"><a
                                        href="/training" class="fs-root-link">Services</a>
                                    <ul class="footer_links_menu-footer-sitemap total-items-3 parent-items-0 single-items-0">
                                        <li class="menu-1756 depth-2 fs-no-children first"><a href="/training">Training</a></li>
                                        <li class="menu-1757 depth-2 fs-no-children"><a href="/support-options">Support</a></li>
                                        <li class="menu-1758 depth-2 fs-no-children last"><a href="/deployment">Development</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="menu-1612 depth-1 total-children-3 parent-children-0 single-children-3  last">
                                    <a href="/download" class="fs-root-link">More</a>
                                    <ul class="footer_links_menu-footer-sitemap total-items-3 parent-items-0 single-items-0">
                                        <li class="menu-2773 depth-2 fs-no-children first"><a href="/download">Download</a></li>
                                        <li class="menu-2775 depth-2 fs-no-children"><a href="/store">Store</a></li>
                                        <li class="menu-1480 depth-2 fs-no-children last"><a href="/contacts">Contacts</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </section>
        </div>
        <div class="region region-footer-copyright">
            <section id="block-block-14" class="block block-block clearfix">
                <div class="footer-copyright">
                    <div class="copyright">Copyright &copy; 2008-2018 Haulmont</div>
                    <div class="licences"><a href="/terms-of-use">Terms of Use</a></div>
                    <div class="socials">
                        <ul>
                            <li><a href="https://github.com/cuba-platform/cuba" class="socials-icon github"></a></li>
                            <li><a href="https://www.youtube.com/c/CubaPlatform" class="socials-icon youtube"></a></li>
                            <li><a href="https://www.facebook.com/CUBAplatform" class="socials-icon facebook"></a></li>
                            <li><a href="https://twitter.com/CubaPlatform" class="socials-icon twitter"></a></li>
                            <li><a href="https://www.linkedin.com/company/cuba-platform" class="socials-icon linkedin"></a></li>
                            <li><a href="https://www.cuba-platform.com/rss.xml" class="socials-icon rss"></a></li>
                        </ul>
                    </div>
                </div>
                <!-- Place this tag in your head or just before your close body tag. -->
                <script async defer src="https://buttons.github.io/buttons.js"></script>
            </section>
        </div>
    </div>
    <!--<script src="https://www.cuba-platform.com/sites/default/files/js/js_OmOCame-fnmHrN5e61CZ6Qi6MS5rHZ2jo6O0qsiYS1Q.js"></script>
    <script src="https://www.cuba-platform.com/sites/default/files/js/js_Es7w5kWiS8CGph1E0HE2jrcO3tONeJfC-cTNWigk87E.js"></script>-->
</footer>
<!-- END FOOTER -->
<div class="scrollTop"></div>
</section>

<script src="/guides/js/foundation.min.js"></script>
<script src="https://unpkg.com/isotope-layout@3.0/dist/isotope.pkgd.js"></script>
<script src="/guides/js/vendor/modernizr.js"></script>
<script src="/guides/js/toc.js"></script>
<script src="/guides/js/navigation.js"></script>
<script src="/guides/js/navbar.js"></script>
<script src="/guides/js/extra.js"></script>
<script src="/guides/js/extra2.js"></script>
<script>
(function ($) {
  $(document).foundation();
  var doc = document.documentElement;
  doc.setAttribute('data-useragent', navigator.userAgent)

  /* Issue #24 */
  $(".blog .content img").each(function() {
    var imgMarkup = $(this)[0].outerHTML;
    console.log(imgMarkup);
    $(this).replaceWith('<div class="img-center">' + imgMarkup + '</div>');
  });
})(jQuery); 
</script>
</body>
</html>
